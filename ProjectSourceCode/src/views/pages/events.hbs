{{! Title: Events Page }}
<!-- Bootstrap icons library -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css"
/>

<!-- Bootstrap JS library -->
{{!-- <script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
  crossorigin="anonymous"
></script> --}}

<!-- Bootstrap icons library -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css"
/>


{{!-- <script src="/docs/5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script> --}}

<style>

    .flip-card {
  background-color: transparent;
  width: 300px;
  height: 200px;
  border: 1px solid #f1f1f1;
  perspective: 1000px; /* Remove this if you don't want the 3D effect */
  margin-bottom: 100px;
}

/* This container is needed to position the front and back side */
.flip-card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  text-align: center;
  transition: transform 0.8s;
  transform-style: preserve-3d;
}

/* Do an horizontal flip when you move the mouse over the flip box container */
.flip-card:hover .flip-card-inner {
  transform: rotateY(180deg);
}

/* Position the front and back side */
.flip-card-front, .flip-card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  -webkit-backface-visibility: hidden; /* Safari */
  backface-visibility: hidden;
}

/* Style the front side (fallback if image is missing) */
.flip-card-front {
  background-color: white;
  color: black;
}

/* Style the back side */
.flip-card-back {
    background-color: white;
    color: black;
    transform: rotateY(180deg);
    overflow-y: auto;
}


</style>
<main class="container">
<!--If user has loaded events locally-->
{{#if lat}}
<div class="container mt-6"></div>
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h2 class="text-center">Art Near You</h2>
            <iframe
                width="100%"
                height="400"
                frameborder="0"
                style="border:0"
                referrerpolicy="no-referrer-when-downgrade"
                src="https://www.google.com/maps/embed/v1/search?key={{API_KEY}}&q=art&center={{lat}},{{long}}&zoom=13"
                allowfullscreen>
            </iframe>
        </div>
    </div>
</div>
<h2 class="text-center mt-4">Large Events and Fairs Happening Soon</h2>
<div class="container mt-5">
    <div class="row justify-content-center">
        {{#each eventsArr}}
        <div class="col-md-4">
            <div class="flip-card">
                <div class="flip-card-inner">
                <div class="flip-card-front">
                    <img src="{{this.eventImage}}" class="card-img-top" alt="Event Image">
                    <div class="card-body">
                        <h5 class="card-title">{{this.eventName}}</h5>
                        <p class="card-text">{{this.eventDate}}</p>
                    </div>
                </div>
                <div class="flip-card-back">
                    <div class="card-body">
                        <p class="card-text">{{this.eventDescp}}</p>
                        <p class="card-text"><a href="{{this.eventLink}}">{{this.eventLink}}</a></p>
                    </div>
                </div>
                </div>
            </div>
        </div>
        {{/each}}
    </div>
</div>

<!--Calendar-->
<table class="table">
    <tr class="font-weight-bold col px-md-2" align="text-center">
        {{#each daysOfWeek}}
        <td class="col px-md-2"><h1>{{this}}</h1></td>
        {{/each}}
    </tr>
    <tr>
        {{#each datesForWeek}}
        <td class="col px-md-2"><p2>{{this}}</p2></td>
        {{/each}}
    </tr>
    <tr>
        <td align="position" class="col px-md-2">
            {{#each events1}}
                <button class="card col px-md-2" type="button" data-bs-toggle="tooltip"> 
                    <div class="card-body col px-md-2">
                         <h5 class="card-title">{{this.event_name}}</h5> <!--Temporary set in place for OH for tooltips and where to put in index.js-->
                         <p class="card-text">Description: {{this.event_description}}</p>
                         <p class="card-text">Location: {{this.event_location}}</p>
                    </div>
                 </button>
            {{/each}}
        </td>
        <td align="position" class="col px-md-2">
            {{#each events2}}
                <button class="btn card col px-md-2" type="button" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Test"> 
                    <div class="card-body col px-md-2">
                         <h5 class="card-title">{{this.event_name}}</h5> <!--Temporary set in place for OH for tooltips and where to put in index.js-->
                         <p class="card-text">Description: {{this.event_description}}</p>
                         <p class="card-text">Location: {{this.event_location}}</p>
                    </div>
                 </button>
            {{/each}}
        </td>
        <td align="position" class="col px-md-2">
            {{#each events3}}
                <button class="card col px-md-2" type="button" data-bs-toggle="tooltip"> 
                    <div class="card-body col px-md-2">
                         <h5 class="card-title">{{this.event_name}}</h5> <!--Temporary set in place for OH for tooltips and where to put in index.js-->
                         <p class="card-text">Description: {{this.event_description}}</p>
                         <p class="card-text">Location: {{this.event_location}}</p>
                    </div>
                 </button>
            {{/each}}
        </td>
        <td align="position" class="col px-md-2">
           {{#each events4}}
                <button class="card col px-md-2" type="button" data-bs-toggle="tooltip"> 
                    <div class="card-body">
                         <h5 class="card-title">{{this.event_name}}</h5> <!--Temporary set in place for OH for tooltips and where to put in index.js-->
                         <p class="card-text">Description: {{this.event_description}}</p>
                         <p class="card-text">Location: {{this.event_location}}</p>
                    </div>
                 </button>
            {{/each}}
        </td>
        <td align="position" class="col px-md-2">
           {{#each events5}}
                <button class="card col px-md-2" type="button" data-bs-toggle="tooltip"> 
                    <div class="card-body col px-md-2">
                         <h5 class="card-title">{{this.event_name}}</h5> <!--Temporary set in place for OH for tooltips and where to put in index.js-->
                         <p class="card-text">Description: {{this.event_description}}</p>
                         <p class="card-text">Location: {{this.event_location}}</p>
                    </div>
                 </button>
            {{/each}}
        </td>
        <td align="position" class="col px-md-2">
            {{#each events6}}
                <button class="card col px-md-2" type="button" data-bs-toggle="tooltip"> 
                    <div class="card-body col px-md-2">
                         <h5 class="card-title">{{this.event_name}}</h5> <!--Temporary set in place for OH for tooltips and where to put in index.js-->
                         <p class="card-text">Description: {{this.event_description}}</p>
                         <p class="card-text">Location: {{this.event_location}}</p>
                    </div>
                 </button>
            {{/each}}
        </td>
        <td align="position" class="col px-md-2">
            {{#each events7}}
                <button class="card col px-md-2" type="button" data-bs-toggle="tooltip"> 
                    <div class="card-body col px-md-2">
                         <h5 class="card-title">{{this.event_name}}</h5> <!--Temporary set in place for OH for tooltips and where to put in index.js-->
                         <p class="card-text">Description: {{this.event_description}}</p>
                         <p class="card-text">Location: {{this.event_location}}</p>
                    </div>
                 </button>
            {{/each}}
        </td>
    </tr>
</table> 
<!--Calendar Model-->
<div class="container mx-auto text-center mt-4">
    <button type="button" class="btn btn-primary mx-auto text-center btn-lg" onclick="openForm()" data-bs-toggle="modal" data-bs-target="#calendarModal">
    Click to Add Event
    </button>
</div>
<!-- Modal -->
<div class="modal fade" id="calendarModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title center" id="exampleModalLabel" align="center">Add Event</h4>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form action="/addEvent" method="POST" class="form-container">
                {{!-- <label for="location"><b>Location</b></label>
                <input type="text" placeholder="Street Address" name="streetAddress" required>
                <input type="text" placeholder="Postal Code" name="postalCode" required>
                <input type="text" placeholder="City" name="city" required>
                <input type="text" placeholder="State" name="state" required>
                <input type="text" placeholder="Country" name="country"> --}}
                <div class="form-group">
                    <label for="eventName" class="form-label mt-2">Event Name</label>
                    <input id = "eventName" type="text" class="form-control" name="eventName" required>
                </div>
                <div class="form-group">
                    <label for="description" class="form-label mt-2">Event Description</label>
                    <input id = "description" type="text" class="form-control" name="description" required>
                </div>
                <div class="form-group">
                    <label for="eventDate" class="form-label mt-2">Event Date</label>
                    <input id = "eventDate" type="date" class="form-control" name="eventDate" required>
                </div>
                <div class="form-group">
                    <label for="streetAddress" class="form-label mt-2">Street Address</label>
                    <input id = "streetAddress" type="text" class="form-control" name="streetAddress" required>
                </div>
                <div class="form-group">
                    <label for="city" class="form-label mt-2">City</label>
                    <input id = "city" type="text" class="form-control" name="city" required>
                </div>
                <div class="form-group">
                    <label for="state" class="form-label mt-2">State</label>
                    <input id = "state" type="text" class="form-control" name="state" required>
                </div>
                <div class="form-group">
                    <label for="country" class="form-label mt-2">Country</label>
                    <input id = "country" type="text" class="form-control" name="country" required>
                </div>
                <div class="form-group">
                    <label for="postalCode" class="form-label mt-2">Postal Code</label>
                    <input id = "postalCode" type="text" class="form-control" name="postalCode" required>
                </div>

                {{!-- <label for="eventName"><b>Event Name</b></label>
                <input type="text" placeholder="Enter Event Name" name="eventName" required>

                <label for="description"><b>Description</b></label>
                <textarea placeholder="Enter Event Description" name="description" required></textarea>

                <label for="eventDate"><b>Event Date</b></label>
                <input type="date" name="eventDate" required> --}}
                <button type="submit" class="btn btn-primary mt-4">Create Event</button>
                <button type="close" class="btn btn-primary mt-4" onclick="closeForm()">Close</button>
                {{!-- <button type="submit" class="btn">Submit</button>
                <button type="button" class="btn cancel" onclick="closeForm()">Close</button> --}}
            </form>
        </div>
    </div>
  </div>
</div>

<!--If user has not loaded events locally-->
{{else}}
<div class="container mx-auto text-center mt-4">
    <button type="button" class="btn btn-primary mx-auto text-center btn-lg" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Click to Load Local Events Near You
    </button>
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title center" id="exampleModalLabel" align="center">Click to Get Local Events Near You</h4>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form method="POST" action="/events" data-bs-toggle="modal" data-bs-target="#exampleModal" align="center">
                <input id="latitude" name="latitude" type="hidden"></input>
                <input id="longitude" name="longitude" type="hidden"></input>
                <button type="button" class="btn btn-primary btn-lg" onclick="getLocation()">Get Events</button>
                {{!-- <button type="submit" hidden>Get Events</button> --}}
        </form>
    </div>
  </div>
</div>

{{/if}}

<script>
function openForm() {
    document.getElementById("eventForm").style.display = "block";
}

function closeForm() {
    document.getElementById("eventForm").style.display = "none";
}
</script>

<script src="/docs/5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</main>